<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>vue-mapbox-map</title>

    <!-- fonts and icons -->
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Raleway'>
    <link rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
    <!-- vue -->
    <script src='https://cdn.jsdelivr.net/npm/vue@latest/dist/vue.js'></script>
    <!-- mapbox -->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js' async></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.min.js' async></script>
    <link rel='stylesheet' type='text/css' href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css'/>
    <link rel='stylesheet' type='text/css' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.css'/>
    <!-- vue-mapbox-map -->
    <script src='https://unpkg.com/vue-mapbox-map@latest/dist/vue-mapbox-map.umd.js'></script>
    <!--script src='../dist/vue-mapbox-map.umd.js'></script-->

    <style>
        body {
            margin: 0;
            padding: 0;
            height: 2000px;
            font-family: 'Raleway', sans-serif;
        }

        #map {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 50%;
        }

        #side-pane {
            position: fixed;
            padding: 50px;
            left: 50%
        }
    </style>
</head>

<body>
<div id='app'>
    <vue-mapbox-map id='map'
                    :access-token='accessToken'
                    :interactive='false'
                    :geocoder='false'
                    :lng='lng'
                    :lat='lat'
                    :zoom='zoom'
                    :pitch='pitch'
                    :bearing='bearing'
    ></vue-mapbox-map>
    <div id='side-pane'>
        <h2>
            <a href='https://github.com/cityseer/vue-mapbox-map'>
                vue-mapbox-map
            </a>
        </h2>
        <p>
            <a href='https://www.mapbox.com/mapbox-gl-js/api/'>
                Mapbox GL JS
            </a>
            wrapped in a
            <a href='https://vuejs.org/'>
                Vue
            </a>
            module for dynamic maps!
        </p>
        <h3>
            Scroll to update the map dynamically!
        </h3>
        <p>
            Zoom: {{ zoom.toLocaleString() }}
        </p>
        <p>
            Pitch: {{ pitch.toLocaleString() }}
        </p>
        <p>
            Bearing: {{ bearing.toLocaleString() }}
        </p>
        <br>
        <div align='center'>
            <a href='https://github.com/cityseer/vue-mapbox-map'>
                <i class='fa fa-github fa-5x'></i>
            </a>
        </div>
    </div>
</div>

<script>

  // base variables for manipulation
  const baseZoom = 13
  const basePitch = 20
  const baseBearing = 0

  // Vue instance
  const app = new Vue({
    // DOM target element
    el: '#app',
    data: {
      accessToken: 'pk.eyJ1Ijoic2hvbmdvbG9sbyIsImEiOiJjamVoN25yYTQxMXBwMzNuc2ZkeGk5eGtzIn0.ZQNxwHhtZDBfsVNjDL0c7A',
      lng: -73.984495,
      lat: 40.756027,
      zoom: baseZoom,
      pitch: basePitch,
      bearing: baseBearing
    },
    // Add vue-mapbox-map component
    components: {
      'vue-mapbox-map': VueMapboxMap
    }
  })
  document.body.onscroll = function () {
    // get offset
    let offset = Math.round(window.document.documentElement.scrollTop || document.body.scrollTop)
    // normalise
    offset = offset / (2000 - window.innerHeight)
    app.zoom = baseZoom + (offset * 5)
    app.pitch = basePitch + (offset * 30)
    app.bearing = baseBearing + (offset * 100)
  }
</script>
</body>
</html>